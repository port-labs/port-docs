<h2> Creating a service account </h2>

:::tip Enable Required APIs
Before you begin, ensure that your Google Cloud project has the following APIs enabled. These APIs are crucial for a smooth GCP integration:

<h3> Required APIs </h3>

- **Cloud Asset API**: Required for accessing your cloud asset data.  [Enable here](https://console.cloud.google.com/apis/api/cloudasset.googleapis.com)
- **Cloud Resource Manager API**: Required for accessing projects, folders, and organizational units.  [Enable here](https://console.cloud.google.com/apis/api/cloudresourcemanager.googleapis.com/overview)

<h3> Optional APIs </h3>

- **Pub/Sub API**: Enable this API only if you plan to query Pub/Sub topics or subscriptions. [Enable here](https://console.cloud.google.com/apis/api/pubsub.googleapis.com/overview)
- **Cloud Quota API**: Enabling this API allows the integration to fetch quota data from your enabled services, enabling dynamic rate limiting. If the API is not enabled, the integration will default to a fixed quota value of 400, and dynamic adjustments based on current quota settings will not be applied. [Enable here](https://console.cloud.google.com/marketplace/product/google/cloudquotas.googleapis.com)
:::

1. Make sure you have your selected project in the top left toggle.

   <img src='/img/build-your-software-catalog/sync-data-to-catalog/cloud-providers/gcp/select_project.png' width='50%' border='1px' /> <br/><br/>

2. In the search text box, search for `service accounts`. Click the `IAM & Admin` option.

   <img src='/img/build-your-software-catalog/sync-data-to-catalog/cloud-providers/gcp/search_service_accounts.png' width='50%' border='1px' /> <br/><br/>

3. Click on `CREATE SERVICE ACCOUNT`.

   <img src='/img/build-your-software-catalog/sync-data-to-catalog/cloud-providers/gcp/click_on_create.png' width='50%' border='1px' /> <br/><br/>

4. Fill up an ID and a description, `continue`.

   <img src='/img/build-your-software-catalog/sync-data-to-catalog/cloud-providers/gcp/follow_instructions.png' width='50%' border='1px' /> <br/><br/>

5. Click the `Select a role` dropdown, then search and add the following Roles:
   1. Browser
   2. Cloud Asset Viewer
   3. Pub/Sub Viewer

   Should look like this:

   <img src='/img/build-your-software-catalog/sync-data-to-catalog/cloud-providers/gcp/give_permissions.png' width='50%' border='1px' /> <br/><br/>

6. Click on continue -> Done
7. You've successfully finished creating a Service account!

   <img src='/img/build-your-software-catalog/sync-data-to-catalog/cloud-providers/gcp/done_creating.png' width='50%' border='1px' /> <br/><br/>

<h2> Fetching Key file </h2>

There are multiple ways to use the service account we just created. In this guide, we'll use the Service Account Key method.

:::warning
According to Google Cloud, This isn't the preferred way for Production purposes. The Terraform Installation is using Google's native method to authenticate, and is the one we propose for a Production setup.
:::

1. Make sure you have your selected project in the top left toggle.

   <img src='/img/build-your-software-catalog/sync-data-to-catalog/cloud-providers/gcp/select_project.png' width='50%' border='1px' /> <br/><br/>

2. In the search text box, search for `service accounts`. Click the `IAM & Admin` option

   <img src='/img/build-your-software-catalog/sync-data-to-catalog/cloud-providers/gcp/selected_service_account.png' width='50%' border='1px' /> <br/><br/>

3. Click on the Service account. 

   Should look like this:

   <img src='/img/build-your-software-catalog/sync-data-to-catalog/cloud-providers/gcp/selected_service_account.png' width='50%' border='1px' /> <br/><br/>

4. Click on `Keys` -> `Add Key` -> `Create new key` -> `JSON` -> `CREATE`
5. This will download your new Service Account Key configuration file.
6. Done!
